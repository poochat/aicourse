​**光伏发电功率预测系统**​（基于深度学习）的完整训练与部署功能汇总，涵盖**数据处理、模型支持、后端服务、前端交互与用户体验**等全部模块，适用于课程展示、项目文档或技术汇报：

---

## 🌞 光伏发电功率预测系统 —— 功能总览

### 一、📊 **数据处理与预处理**

* ✅ 支持读取自定义格式的光伏历史数据 CSV 文件（含年、月、日、小时、功率、辐照度、温度等字段）
* ✅ 自动解析时间戳并构建 `datetime` 索引
* ✅ 对缺失值和异常字符进行鲁棒性清洗（使用 `pd.to_numeric(..., errors='coerce')`）
* ✅ 验证最近7小时数据是否​**严格连续（每小时一条）**​，确保预测输入有效
* ✅ 自动提取装机容量（`capacity_kW`）用于容量因子计算

---

### 二、🧠 **多模型深度学习预测引擎**

集成5种先进时序预测模型，均已完成加载与封装：

| 模型                                                | 特点                               |
| ----------------------------------------------------- | ------------------------------------ |
| **LSTM**                                      | 经典循环神经网络，擅长长期依赖建模 |
| **GRU**                                       | LSTM 的轻量化变体，训练更快        |
| ​**TCN**​（Temporal Convolutional Network） | 并行化能力强，感受野大             |
| **Transformer**                               | 基于注意力机制，捕捉全局时序模式   |
| **CNN-LSTM**                                  | 融合局部特征提取与序列建模         |

* ✅ 所有模型共享统一输入接口：**过去6小时的5维特征**
  （发电功率、POA 辐照度、GHI 辐照度、组件温度、环境温度）
* ✅ 输出：**未来第7小时的发电功率（kW）**
* ✅ 支持运行时动态切换模型（URL 参数 `?model=XXX`）

---

### 三、🌐 **Web 后端服务（FastAPI）**

* ✅ 基于 **FastAPI + Uvicorn** 构建高性能异步 Web 服务
* ✅ 自动重载（开发模式），便于调试
* ✅ RESTful 接口：`GET /` 返回预测主页
* ✅ 安全容错：
  * 数据不足时返回友好提示
  * 模型预测失败（如 NaN）自动拦截
  * 无效模型名自动回退至 LSTM
* ✅ 静态资源托管（CSS、图表库）

---

### 四、🖥️ **现代化前端界面（HTML + Chart.js + Jinja2）**

#### 📌 核心信息展示

* **当前电站状态卡片**
  * 当前时间、实测功率、装机容量、实时容量因子（%）
* **未来1小时预测结果**
  * 醒目数字显示预测功率（kW）与容量因子
  * “刷新预测”按钮（重新加载最新数据）
* **最近6小时实测数据表格**
  * 时间（HH:00）、功率、POA 辐照度、组件温度
  * 斑马纹 + 悬停高亮，提升可读性
* **最近48小时发电功率趋势图**
  * 使用 **Chart.js** 渲染平滑曲线
  * 支持悬停查看具体数值
  * 响应式设计，适配手机/平板/PC

#### 🎨 UI/UX 特性

* 深色科技风主题（蓝绿渐变 + 毛玻璃卡片）
* 系统默认中文字体，无需额外字体文件
* 模型选择下拉菜单，实时切换无刷新
* 加载状态与错误提示占位（预留扩展）

---

### 五、⚙️ **系统健壮性与兼容性**

* ✅ 自动处理跨天数据（如 23 → 0 点）
* ✅ 兼容 CSV 中 `hour` 列为字符串的情况（自动转 int）
* ✅ 消除 pandas FutureWarning（使用 `np.array(...)` 包裹）
* ✅ 无外部数据库依赖，纯文件驱动
* ✅ 本地部署，地址：`http://127.0.0.1:8000`

---

### 六、🎯 应用场景

* 电力系统课程设计 / 毕业设计
* 光伏电站短期功率预测演示
* 多模型对比实验平台（LSTM vs Transformer 等）
* 可扩展为微电网调度、储能充放电决策支持模块

---

### 七、📦 技术栈

| 层级 | 技术                                                  |
| ------ | ------------------------------------------------------- |
| 后端 | Python 3.12, FastAPI, Uvicorn, Pandas, NumPy          |
| 模型 | PyTorch / TensorFlow（由 `predict_core.py` 封装） |
| 前端 | HTML5, CSS3, Jinja2, Chart.js                         |
| 部署 | 本地开发服务器（支持一键启动）                        |

---

### 八、📌 项目参考资料
https://github.com/tensorflow/tensorflow

https://github.com/openclimatefix/open-source-quartz-solar-forecast

https://github.com/openclimatefix/open-data-pvnet

https://github.com/yuhao-nie/Stanford-solar-forecasting-dataset

